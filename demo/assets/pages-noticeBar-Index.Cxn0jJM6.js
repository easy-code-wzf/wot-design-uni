import{d as e,r as t,q as a,X as l,v as n,m as o,aa as i,T as s,ab as r,o as u,c,w as d,x as f,e as p,y as v,g as x,F as w,h as y,f as b,t as _,p as m,n as h,i as g,L as k,a as $,b as C,ac as D}from"./index-WwrgI7Rh.js";import{f as T,i as j,l as I,m as S,w as F,o as P,q as A,r as q,I as z,b as X,a as G}from"./page-wraper.XLZNc_u_.js";import{_ as H}from"./demo-block.BZqo-_az.js";import{_ as L}from"./wd-button.Df9kCKkG.js";const M=X(e({name:"wd-notice-bar",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...T,text:{type:[String,Array],default:""},type:j("warning"),scrollable:I(!0),delay:S(1),speed:S(50),closable:I(!1),wrapable:I(!1),prefix:String,color:String,backgroundColor:String,direction:j("horizontal")},emits:["close","next","click"],setup(e,{expose:$,emit:C}){const D=".wd-notice-bar__wrap",T=".wd-notice-bar__content",j=e,I=C,S=t(0),X=t(!0),G=t(0),H=a((()=>Array.isArray(j.text)?j.text:[j.text])),L=a((()=>H.value[G.value])),M=t(0),N=t(null),V=t(null),Y=a((()=>"horizontal"===j.direction)),B=a((()=>"vertical"===j.direction)),E=l({transitionProperty:"unset",transitionDelay:"unset",transitionDuration:"unset",transform:"none",transitionTimingFunction:"linear"}),J=a((()=>P(E))),K=a((()=>{const e={};return A(j.color)&&(e.color=j.color),A(j.backgroundColor)&&(e.background=j.backgroundColor),`${P(e)};${j.customStyle}`})),O=a((()=>{const{type:e,wrapable:t,scrollable:a}=j;let l=[];return e&&l.push(`is-${e}`),Y.value?!t&&!a&&l.push("wd-notice-bar--ellipse"):l.push("wd-notice-bar--ellipse"),t&&!a&&l.push("wd-notice-bar--wrap"),l.join(" ")})),{proxy:Q}=k();function R(){W(),U()}function U(){r((()=>async function(){const[e,t]=await te();if(!e.width||!t.width||!t.height)return;N.value=e,V.value=t,S.value=e.width,Y.value?j.scrollable&&ee({duration:t.width/j.speed,delay:j.delay,translate:-t.width}):H.value.length>1&&ae(t.height)}()))}function W(){E.transitionProperty="unset",E.transitionDelay="unset",E.transitionDuration="unset",E.transform="none",E.transitionTimingFunction="linear",G.value=0,M.value=0}function Z(){X.value=!1,I("close")}function ee({duration:e,delay:t,translate:a}){E.transitionProperty="all",E.transitionDelay=`${t}s`,E.transitionDuration=`${e}s`,E.transform=`${"vertical"===j.direction?"translateY":"translateX"}(${a}px)`,E.transitionTimingFunction="linear"}function te(){return Promise.all([z(D,!1,Q),z(T,!1,Q)])}async function ae(e){const t=-e/(H.value.length+1)*(G.value+1);ee({duration:e/(H.value.length+1)/j.speed,delay:j.delay,translate:t})}function le(){Y.value?ee({duration:0,delay:0,translate:S.value+1}):++M.value>=H.value.length&&(M.value=0,ee({duration:0,delay:0,translate:0}));const e=setTimeout((()=>{G.value>=H.value.length-1?G.value=0:G.value++,I("next",G.value),r((async()=>{try{const[e,t]=await te();N.value=e,V.value=t,S.value=e.width||0}catch(e){}V.value&&V.value.width&&V.value.height&&(Y.value?ee({duration:(S.value+V.value.width)/j.speed,delay:j.delay,translate:-V.value.width}):ae(V.value.height))})),clearTimeout(e)}),20)}function ne(){const e=q(j.text)?{index:G.value,text:j.text[G.value]}:{index:0,text:j.text};I("click",e)}return n((()=>j.text),(()=>{R()}),{deep:!0}),o((()=>{U()})),i((()=>{U()})),s((()=>{W()})),$({reset:R}),(e,t)=>{const a=g;return X.value?(u(),c(a,{key:0,class:h(`wd-notice-bar ${e.customClass} ${O.value}`),style:v(K.value)},{default:d((()=>[e.prefix?(u(),c(F,{key:0,"custom-class":"wd-notice-bar__prefix",name:e.prefix},null,8,["name"])):f(e.$slots,"prefix",{key:1},void 0,!0),p(a,{class:"wd-notice-bar__wrap"},{default:d((()=>[p(a,{class:"wd-notice-bar__content",style:v(J.value),onTransitionend:le,onClick:ne},{default:d((()=>[B.value?(u(),x(w,{key:0},[(u(!0),x(w,null,y(H.value,(e=>(u(),c(a,{key:e},{default:d((()=>[b(_(e),1)])),_:2},1024)))),128)),H.value.length>1?(u(),c(a,{key:0},{default:d((()=>[b(_(H.value[0]),1)])),_:1})):m("",!0)],64)):f(e.$slots,"default",{key:1},(()=>[b(_(L.value),1)]),!0)])),_:3},8,["style"])])),_:3}),e.closable?(u(),c(F,{key:2,"custom-class":"wd-notice-bar__suffix",name:"close-bold",onClick:Z})):f(e.$slots,"suffix",{key:3},void 0,!0)])),_:3},8,["class","style"])):m("",!0)}}}),[["__scopeId","data-v-8ed555d4"]]),N=X(e({__name:"Index",setup(e){const a=t();function l(){var e;null==(e=a.value)||e.reset()}const n=t(["欢迎使用wot design uni","该组件库基于uniapp ->Vue3, ts构建","项目地址：https://github.com/Moonofweisheng/wot-design-uni","我们的目标是打造最强uniapp组件库","诚挚邀请大家共同建设","这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息"]),o=e=>{console.log("展示下一条，index: ",e),console.log("文本是："+n.value[e])};function i(e){console.log(e)}return(e,t)=>{const s=$(C("wd-notice-bar"),M),r=$(C("demo-block"),H),f=$(C("wd-icon"),F),v=$(C("wd-button"),L),x=g,w=$(C("page-wraper"),G);return u(),c(w,null,{default:d((()=>[p(x,null,{default:d((()=>[p(r,{title:"基本用法"},{default:d((()=>[p(s,{text:"这是一条消息提示信息这是一条消息提示信息这是一条消息提示信息",prefix:"warn-bold"})])),_:1}),p(r,{title:"类型修改"},{default:d((()=>[p(s,{type:"danger",text:"当前网络不可用，请检查你的网络设置。当前网络不可用，请检查你的网络设置。",prefix:"wifi-error","custom-class":"space"}),p(s,{type:"info",text:"pc-win沃特已登录，可在“设备管理”中查看详情。pc-win沃特已登录，可在“设备管理”中查看详情。",prefix:"check-outline"})])),_:1}),p(r,{title:"禁止滚动"},{default:d((()=>[p(s,{scrollable:!1,text:"通知被禁或时段内消息屏蔽可能造成消…",prefix:"warn-bold"})])),_:1}),p(r,{title:"插槽"},{default:d((()=>[p(s,{scrollable:!1},{prefix:d((()=>[p(f,{"custom-class":"prefix",name:"warn-bold"},{default:d((()=>[b("占位符")])),_:1})])),suffix:d((()=>[D("div",{style:{color:"#4d80f0"}},"查看")])),default:d((()=>[b(" 通知被禁或时段内消息屏蔽可能造成消… ")])),_:1})])),_:1}),p(r,{title:"可关闭的"},{default:d((()=>[p(s,{text:"挂起后，电脑与手机均不会有新客户接入。挂起后，电脑与手机均不会有新客户接入。",closable:"",prefix:"warn-bold"})])),_:1}),p(r,{title:"多行展示"},{default:d((()=>[p(s,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",wrapable:"",scrollable:!1})])),_:1}),p(r,{title:"自定义颜色"},{default:d((()=>[p(s,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",prefix:"check-outline",color:"#34D19D","background-color":"#f0f9eb"})])),_:1}),p(r,{title:"多文本轮播"},{default:d((()=>[p(s,{onClick:i,text:n.value,prefix:"check-outline",onNext:o},null,8,["text"])])),_:1}),p(r,{title:"垂直滚动"},{default:d((()=>[p(s,{onClick:i,prefix:"warn-bold",direction:"vertical",text:n.value,delay:3,"custom-class":"space"},null,8,["text"]),p(s,{onClick:i,prefix:"warn-bold",direction:"vertical",text:"只有一条消息不会滚动",delay:3,"custom-class":"space"})])),_:1}),p(r,{title:"重置播放动画"},{default:d((()=>[p(s,{ref_key:"notice",ref:a,prefix:"warn-bold",direction:"vertical",text:n.value,delay:3,"custom-class":"space"},null,8,["text"]),p(v,{onClick:l},{default:d((()=>[b("重置播放动画")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-ea79056b"]]);export{N as default};
