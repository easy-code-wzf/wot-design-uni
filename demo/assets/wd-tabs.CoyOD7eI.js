import{d as a,q as e,r as s,v as t,o as l,c as n,w as i,n as o,y as d,x as c,p as r,i as u,L as m,X as b,m as _,ab as p,a as w,b as f,e as v,g as y,h,u as g,F as x,f as I,t as k,a8 as $,A as C,a6 as S,j as N}from"./index-WwrgI7Rh.js";import{f as T,y as L,m as j,l as V,D as z,i as P,g as X,q as W,o as H,E as q,W as A,b as E,R as G,w as M,h as R,I as D,X as F}from"./page-wraper.XLZNc_u_.js";import{w as K}from"./wd-badge.BgH63yVt.js";import{w as O,a as B}from"./wd-sticky-box.TVDANRTd.js";import{u as J}from"./useTouch.B02vohwq.js";import{u as Q}from"./useChildren.Da1LiOi9.js";import{u as U}from"./useTranslate.B9y1fU2w.js";const Y=Symbol("wd-tabs"),Z={...T,modelValue:L(0),slidableNum:j(6),mapNum:j(10),mapTitle:String,sticky:V(!1),offsetTop:j(0),swipeable:V(!1),autoLineWidth:V(!1),lineWidth:z,lineHeight:z,color:P(""),inactiveColor:P(""),animated:V(!1),duration:j(300),slidable:P("auto")},aa=E(a({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...T,name:z,title:String,disabled:V(!1),lazy:V(!0),badgeProps:Object},setup(a){const b=a,{proxy:_}=m(),{parent:p,index:w}=X(Y),f=e((()=>!!W(p)&&p.state.activeIndex===w.value)),v=s(f.value),y=e((()=>{const a={};return f.value||W(p)&&p.props.animated||(a.display="none"),H(a)})),h=e((()=>!b.lazy||v.value||f.value));return t(f,(a=>{a&&(v.value=!0)})),t((()=>b.name),(a=>{!W(a)||q(a)||A(a)?p&&function(a){const{name:e}=b;if(null==e||""===e)return;p&&p.children.forEach((s=>{s.$.uid!==a.$.uid&&s.name===e&&console.error(`The tab's bound value: ${e} has been used`)}))}(_):console.error("[wot design] error(wd-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),(a,e)=>{const s=u;return l(),n(s,{class:o(`wd-tab ${a.customClass}`),style:d(a.customStyle)},{default:i((()=>[h.value?(l(),n(s,{key:0,class:o(["wd-tab__body",{"wd-tab__body--inactive":!f.value}]),style:d(y.value)},{default:i((()=>[c(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])):r("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-3a26b2b4"]]),ea=E(a({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:Z,emits:["change","disabled","click","update:modelValue"],setup(a,{expose:s,emit:T}){const L=".wd-tabs__nav-item",j=".wd-tabs__nav-item-text",V=".wd-tabs__nav-container",z=a,P=T,{translate:X}=U("tabs"),E=b({activeIndex:0,lineStyle:"display:none;",useInnerLine:!1,inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:Z,linkChildren:aa}=Q(Y);aa({state:E,props:z});const{proxy:ea}=m(),sa=J(),ta=e((()=>"always"===z.slidable||Z.length>z.slidableNum)),la=e((()=>z.animated?H({left:-100*E.activeIndex+"%","transition-duration":z.duration+"ms","-webkit-transition-duration":z.duration+"ms"}):"")),na=(a,e)=>W(a.name)?a.name:e,ia=(a=0,e=!1,s=!0)=>{0!==Z.length&&(a=pa(a),Z[a].disabled||(E.activeIndex=a,s&&(ca(!1===e),ra()),function(){if(!E.inited)return;const a=na(Z[E.activeIndex],E.activeIndex);a!==z.modelValue&&(P("change",{index:E.activeIndex,name:a}),P("update:modelValue",a))}()))},oa=G(ia,100,{leading:!0});function da(){E.mapShow?(E.animating=!1,setTimeout((()=>{E.mapShow=!1}),300)):(E.mapShow=!0,setTimeout((()=>{E.animating=!0}),100))}async function ca(a=!0){if(!E.inited)return;const{autoLineWidth:e,lineWidth:s,lineHeight:t}=z;try{const l={};if(W(s))l.width=R(s);else if(e){const a=await D(j,!0,ea),e=Number(a[E.activeIndex].width);l.width=R(e)}W(t)&&(l.height=R(t),l.borderRadius=`calc(${R(t)} / 2)`);const n=await D(L,!0,ea),i=n[E.activeIndex];let o=n.slice(0,E.activeIndex).reduce(((a,e)=>a+Number(e.width)),0)+Number(i.width)/2;o&&(l.transform=`translateX(${o}px) translateX(-50%)`,a&&(l.transition="width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),E.useInnerLine=!1,E.lineStyle=H(l))}catch(l){console.error("[wot design] error(wd-tabs): update line style failed",l)}}function ra(){E.inited&&Promise.all([D(L,!0,ea),D(V,!1,ea)]).then((([a,e])=>{const s=a[E.activeIndex],t=a.slice(0,E.activeIndex).reduce(((a,e)=>a+e.width),0)-(e.width-Number(s.width))/2;t===E.scrollLeft?E.scrollLeft=t+Math.random()/1e4:E.scrollLeft=t}))}function ua(a){if(void 0===a)return;const{disabled:e}=Z[a],s=na(Z[a],a);e?P("disabled",{index:a,name:s}):(E.mapShow&&da(),oa(a),P("click",{index:a,name:s}))}function ma(a){z.swipeable&&sa.touchStart(a)}function ba(a){z.swipeable&&sa.touchMove(a)}function _a(){if(!z.swipeable)return;const{direction:a,deltaX:e,offsetX:s}=sa;"horizontal"===a.value&&s.value>=50&&(e.value>0&&0!==E.activeIndex?oa(E.activeIndex-1):e.value<0&&E.activeIndex!==Z.length-1&&oa(E.activeIndex+1))}function pa(a){if(q(a)&&a>=Z.length&&(console.error("[wot design] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),a=0),A(a)){const e=Z.findIndex((e=>e.name===a));a=-1===e?0:e}return a}return t((()=>z.modelValue),(a=>{q(a)||A(a)||console.error("[wot design] error(wd-tabs): the type of value should be number or string"),""!==a&&W(a)||console.error("[wot design] error(wd-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof a&&a<0&&console.error("[wot design] error(wd-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),t((()=>z.modelValue),(a=>{const e=pa(a);oa(a,!1,e!==E.activeIndex)}),{immediate:!1,deep:!0}),t((()=>Z.length),(()=>{E.inited&&p((()=>{oa(z.modelValue)}))})),t((()=>z.slidableNum),(a=>{F(a,"slidableNum")})),t((()=>z.mapNum),(a=>{F(a,"mapNum")})),_((()=>{E.inited=!0,p((()=>{ia(z.modelValue,!0),E.useInnerLine=!0}))})),s({setActive:oa,scrollIntoView:ra,updateLineStyle:ca}),(a,e)=>{const s=N,t=w(f("wd-badge"),K),m=u,b=$;return a.sticky?(l(),n(B,{key:0},{default:i((()=>[v(m,{class:o(`wd-tabs ${a.customClass} ${ta.value?"is-slide":""} ${a.mapNum<g(Z).length&&0!==a.mapNum?"is-map":""}`),style:d(a.customStyle)},{default:i((()=>[v(O,{"offset-top":a.offsetTop},{default:i((()=>[v(m,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:i((()=>[v(m,{class:"wd-tabs__nav--wrap"},{default:i((()=>[v(b,{"scroll-x":ta.value,"scroll-with-animation":"","scroll-left":E.scrollLeft},{default:i((()=>[v(m,{class:"wd-tabs__nav-container"},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((e,c)=>(l(),n(m,{onClick:a=>ua(c),key:c,class:o(`wd-tabs__nav-item  ${E.activeIndex===c?"is-active":""} ${e.disabled?"is-disabled":""}`),style:d(E.activeIndex===c?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[e.badgeProps?(l(),n(t,C(S({key:0},e.badgeProps)),{default:i((()=>[v(s,{class:"wd-tabs__nav-item-text"},{default:i((()=>[I(k(e.title),1)])),_:2},1024)])),_:2},1040)):(l(),n(s,{key:1,class:"wd-tabs__nav-item-text"},{default:i((()=>[I(k(e.title),1)])),_:2},1024)),E.activeIndex===c&&E.useInnerLine?(l(),n(m,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):r("",!0)])),_:2},1032,["onClick","class","style"])))),128)),v(m,{class:"wd-tabs__line",style:d(E.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<g(Z).length&&0!==a.mapNum?(l(),n(m,{key:0,class:"wd-tabs__map"},{default:i((()=>[v(m,{class:o("wd-tabs__map-btn  "+(E.animating?"is-open":"")),onClick:da},{default:i((()=>[v(m,{class:o("wd-tabs__map-arrow  "+(E.animating?"is-open":""))},{default:i((()=>[v(M,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),v(m,{class:"wd-tabs__map-header",style:d(`${E.mapShow?"":"display:none;"}  ${E.animating?"opacity:1;":""}`)},{default:i((()=>[I(k(a.mapTitle||g(X)("all")),1)])),_:1},8,["style"]),v(m,{class:o("wd-tabs__map-body  "+(E.animating?"is-open":"")),style:d(E.mapShow?"":"display:none")},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((e,s)=>(l(),n(m,{class:"wd-tabs__map-nav-item",key:s,onClick:a=>ua(s)},{default:i((()=>[v(m,{class:o(`wd-tabs__map-nav-btn ${E.activeIndex===s?"is-active":""}  ${e.disabled?"is-disabled":""}`),style:d(E.activeIndex===s?a.color?"color:"+a.color+";border-color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[I(k(e.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):r("",!0)])),_:1})])),_:1},8,["offset-top"]),v(m,{class:"wd-tabs__container",onTouchstart:ma,onTouchmove:ba,onTouchend:_a,onTouchcancel:_a},{default:i((()=>[v(m,{class:o(["wd-tabs__body",a.animated?"is-animated":""]),style:d(la.value)},{default:i((()=>[c(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(m,{class:"wd-tabs__mask",style:d(`${E.mapShow?"":"display:none;"} ${E.animating?"opacity:1;":""}`),onClick:da},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(l(),n(m,{key:1,class:o(`wd-tabs ${a.customClass} ${ta.value?"is-slide":""} ${a.mapNum<g(Z).length&&0!==a.mapNum?"is-map":""}`)},{default:i((()=>[v(m,{class:"wd-tabs__nav"},{default:i((()=>[v(m,{class:"wd-tabs__nav--wrap"},{default:i((()=>[v(b,{"scroll-x":ta.value,"scroll-with-animation":"","scroll-left":E.scrollLeft},{default:i((()=>[v(m,{class:"wd-tabs__nav-container"},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((e,c)=>(l(),n(m,{onClick:a=>ua(c),key:c,class:o(`wd-tabs__nav-item ${E.activeIndex===c?"is-active":""} ${e.disabled?"is-disabled":""}`),style:d(E.activeIndex===c?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[e.badgeProps?(l(),n(t,S({key:0,"custom-class":"wd-tabs__nav-item-badge"},e.badgeProps),{default:i((()=>[v(s,{class:"wd-tabs__nav-item-text"},{default:i((()=>[I(k(e.title),1)])),_:2},1024)])),_:2},1040)):(l(),n(s,{key:1,class:"wd-tabs__nav-item-text"},{default:i((()=>[I(k(e.title),1)])),_:2},1024)),E.activeIndex===c&&E.useInnerLine?(l(),n(m,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):r("",!0)])),_:2},1032,["onClick","class","style"])))),128)),v(m,{class:"wd-tabs__line",style:d(E.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<g(Z).length&&0!==a.mapNum?(l(),n(m,{key:0,class:"wd-tabs__map"},{default:i((()=>[v(m,{class:"wd-tabs__map-btn",onClick:da},{default:i((()=>[v(m,{class:o("wd-tabs__map-arrow "+(E.animating?"is-open":""))},{default:i((()=>[v(M,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),v(m,{class:"wd-tabs__map-header",style:d(`${E.mapShow?"":"display:none;"}  ${E.animating?"opacity:1;":""}`)},{default:i((()=>[I(k(g(X)("all")),1)])),_:1},8,["style"]),v(m,{class:o("wd-tabs__map-body "+(E.animating?"is-open":"")),style:d(E.mapShow?"":"display:none")},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((a,e)=>(l(),n(m,{class:"wd-tabs__map-nav-item",key:e,onClick:a=>ua(e)},{default:i((()=>[v(m,{class:o(`wd-tabs__map-nav-btn ${E.activeIndex===e?"is-active":""}  ${a.disabled?"is-disabled":""}`)},{default:i((()=>[I(k(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):r("",!0)])),_:1}),v(m,{class:"wd-tabs__container",onTouchstart:ma,onTouchmove:ba,onTouchend:_a,onTouchcancel:_a},{default:i((()=>[v(m,{class:o(["wd-tabs__body",a.animated?"is-animated":""]),style:d(la.value)},{default:i((()=>[c(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(m,{class:"wd-tabs__mask",style:d(`${E.mapShow?"":"display:none;"}  ${E.animating?"opacity:1":""}`),onClick:da},null,8,["style"])])),_:3},8,["class"]))}}}),[["__scopeId","data-v-34d306b5"]]);export{aa as _,ea as a};
