import{d as e,q as a,r as l,v as s,S as o,o as r,c as t,w as i,n,y as u,x as d,p as c,e as p,f as m,t as f,i as h,j as g,a7 as v}from"./index-WwrgI7Rh.js";import{f as b,i as x,y,l as _,m as w,M as C,N as S,g as $,w as k,q as T,O as V,o as W,s as j,b as L}from"./page-wraper.XLZNc_u_.js";import{u as P}from"./useTranslate.B9y1fU2w.js";const q=L(e({name:"wd-textarea",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...b,customTextareaContainerClass:x(""),customTextareaClass:x(""),customLabelClass:x(""),modelValue:y(""),placeholder:String,placeholderStyle:String,placeholderClass:x(""),disabled:_(!1),maxlength:w(-1),autoFocus:_(!1),focus:_(!1),autoHeight:_(!1),fixed:_(!1),cursorSpacing:w(0),cursor:w(-1),confirmType:String,confirmHold:_(!1),showConfirmBar:_(!0),selectionStart:w(-1),selectionEnd:w(-1),adjustPosition:_(!0),disableDefaultPadding:_(!1),holdKeyboard:_(!1),showPassword:_(!1),clearable:_(!1),readonly:_(!1),prefixIcon:String,usePrefixSlot:_(!1),showWordLimit:_(!1),label:String,labelWidth:x(""),useLabelSlot:_(!1),size:String,error:_(!1),center:_(!1),noBorder:_(!1),required:_(!1),prop:x(""),rules:C(),clearTrigger:x("always"),focusWhenClear:_(!0),ignoreCompositionEvent:_(!0),inputmode:x("text")},emits:["update:modelValue","clear","change","blur","focus","input","keyboardheightchange","confirm","linechange","clickprefixicon","click"],setup(e,{emit:b}){const{translate:x}=P("textarea"),y=e,_=b,w=a((()=>T(y.placeholder)?y.placeholder:x("placeholder"))),C=l(!1),L=l(!1),q=l(!1),I=l(""),B=S();s((()=>y.focus),(e=>{L.value=e}),{immediate:!0,deep:!0}),s((()=>y.modelValue),(e=>{I.value=T(e)?String(e):""}),{immediate:!0,deep:!0});const{parent:E}=$(V),H=a((()=>{const{disabled:e,readonly:a,clearable:l,clearTrigger:s}=y;return!(!l||a||e||!I.value||!("always"===s||"focus"===y.clearTrigger&&q.value))})),M=a((()=>{const{disabled:e,readonly:a,maxlength:l,showWordLimit:s}=y;return Boolean(!e&&!a&&T(l)&&l>-1&&s)})),z=a((()=>E&&y.prop&&E.errorMessages&&E.errorMessages[y.prop]?E.errorMessages[y.prop]:"")),F=a((()=>{let e=!1;if(E&&E.props.rules){const a=E.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===y.prop&&Array.isArray(a[l])&&(e=a[l].some((e=>e.required)))}return y.required||y.rules.some((e=>e.required))||e})),K=a((()=>String(U(y.modelValue)||"").length)),O=a((()=>`wd-textarea   ${y.label||y.useLabelSlot?"is-cell":""} ${y.center?"is-center":""} ${B.border.value?"is-border":""} ${y.size?"is-"+y.size:""} ${y.error?"is-error":""} ${y.disabled?"is-disabled":""} ${y.autoHeight?"is-auto-height":""} ${K.value>0?"is-not-empty":""}  ${y.noBorder?"is-no-border":""} ${y.customClass}`)),A=a((()=>`wd-textarea__label ${y.customLabelClass} ${F.value?"is-required":""}`)),D=a((()=>`wd-textarea__placeholder  ${y.placeholderClass}`)),G=a((()=>`${K.value>0?"wd-textarea__count-current":""} ${K.value>y.maxlength?"is-error":""}`)),N=a((()=>y.labelWidth?W({"min-width":y.labelWidth,"max-width":y.labelWidth}):""));function U(e){const{maxlength:a,showWordLimit:l}=y;return l&&-1!==a&&String(e).length>a?e.toString().substring(0,a):`${e}`}async function J(){C.value=!0,q.value=!1,I.value="",y.focusWhenClear&&(L.value=!1),await j(),y.focusWhenClear&&(L.value=!0,q.value=!0),_("change",{value:""}),_("update:modelValue",I.value),_("clear")}async function Q({detail:e}){await j(150),C.value?C.value=!1:(q.value=!1,_("blur",{value:I.value,cursor:e.cursor?e.cursor:null}))}function R({detail:e}){q.value=!0,_("focus",e)}function X({detail:e}){I.value=U(I.value),_("update:modelValue",I.value),_("input",e)}function Y({detail:e}){_("keyboardheightchange",e)}function Z({detail:e}){_("confirm",e)}function ee({detail:e}){_("linechange",e)}function ae(){_("clickprefixicon")}return o((()=>{I.value=U(I.value),_("update:modelValue",I.value)})),(e,a)=>{const l=h,s=g,o=v;return r(),t(l,{class:n(O.value),style:u(e.customStyle)},{default:i((()=>[e.label||e.useLabelSlot?(r(),t(l,{key:0,class:n(A.value),style:u(N.value)},{default:i((()=>[e.prefixIcon||e.usePrefixSlot?(r(),t(l,{key:0,class:"wd-textarea__prefix"},{default:i((()=>[e.prefixIcon&&!e.usePrefixSlot?(r(),t(k,{key:0,"custom-class":"wd-textarea__icon",name:e.prefixIcon,onClick:ae},null,8,["name"])):d(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):c("",!0),p(l,{class:"wd-textarea__label-inner"},{default:i((()=>[e.label?(r(),t(s,{key:0},{default:i((()=>[m(f(e.label),1)])),_:1})):d(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):c("",!0),p(l,{class:n(`wd-textarea__value ${H.value?"is-suffix":""} ${e.customTextareaContainerClass} ${M.value?"is-show-limit":""}`)},{default:i((()=>[p(o,{class:n(`wd-textarea__inner ${e.customTextareaClass}`),modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),"show-count":!1,placeholder:w.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:L.value,"auto-focus":e.autoFocus,"placeholder-style":e.placeholderStyle,"placeholder-class":D.value,"auto-height":e.autoHeight,"cursor-spacing":e.cursorSpacing,fixed:e.fixed,cursor:e.cursor,"show-confirm-bar":e.showConfirmBar,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,"disable-default-padding":e.disableDefaultPadding,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:X,onFocus:R,onBlur:Q,onConfirm:Z,onLinechange:ee,onKeyboardheightchange:Y},null,8,["class","modelValue","placeholder","disabled","maxlength","focus","auto-focus","placeholder-style","placeholder-class","auto-height","cursor-spacing","fixed","cursor","show-confirm-bar","selection-start","selection-end","adjust-position","hold-keyboard","confirm-type","confirm-hold","disable-default-padding","ignoreCompositionEvent","inputmode"]),z.value?(r(),t(l,{key:0,class:"wd-textarea__error-message"},{default:i((()=>[m(f(z.value),1)])),_:1})):c("",!0),e.readonly?(r(),t(l,{key:1,class:"wd-textarea__readonly-mask"})):c("",!0),p(l,{class:"wd-textarea__suffix"},{default:i((()=>[H.value?(r(),t(k,{key:0,"custom-class":"wd-textarea__clear",name:"error-fill",onClick:J})):c("",!0),M.value?(r(),t(l,{key:1,class:"wd-textarea__count"},{default:i((()=>[p(s,{class:n(G.value)},{default:i((()=>[m(f(K.value),1)])),_:1},8,["class"]),m(" /"+f(e.maxlength),1)])),_:1})):c("",!0)])),_:1})])),_:1},8,["class"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-44bc067b"]]);export{q as _};
